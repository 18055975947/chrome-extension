import{_ as s,c as a,o as i,a4 as e}from"./chunks/framework.DUbQYUwk.js";const m=JSON.parse('{"title":"Chrome.permissions API","description":"","frontmatter":{},"headers":[],"relativePath":"api/permissions.md","filePath":"api/permissions.md"}'),n={name:"api/permissions.md"},l=e('<h1 id="chrome-permissions-api" tabindex="-1">Chrome.permissions API <a class="header-anchor" href="#chrome-permissions-api" aria-label="Permalink to &quot;Chrome.permissions API&quot;">​</a></h1><h2 id="一、chrome-permissions-api-类型-types" tabindex="-1">一、<code>chrome.permissions API</code> 类型（<code>Types</code>） <a class="header-anchor" href="#一、chrome-permissions-api-类型-types" aria-label="Permalink to &quot;一、`chrome.permissions API` 类型（`Types`）&quot;">​</a></h2><h3 id="_1-permissions-属性" tabindex="-1">1. <code>Permissions</code> 属性 <a class="header-anchor" href="#_1-permissions-属性" aria-label="Permalink to &quot;1. `Permissions` 属性&quot;">​</a></h3><h4 id="_1-1-origins" tabindex="-1">1.1 <code>origins</code> <a class="header-anchor" href="#_1-1-origins" aria-label="Permalink to &quot;1.1 `origins`&quot;">​</a></h4><ul><li><code>string[]</code> 选填</li><li>主机权限的列表，包括清单中的 <code>optional_permissions</code> 或 <code>permissions</code> 键中指定的权限，以及与内容脚本相关联的权限。</li></ul><h4 id="_1-2-permissions" tabindex="-1">1.2 <code>permissions</code> <a class="header-anchor" href="#_1-2-permissions" aria-label="Permalink to &quot;1.2 `permissions`&quot;">​</a></h4><ul><li><code>string[]</code> 选填</li><li>已命名权限（不包括主机或源）的列表。</li></ul><h2 id="二、chrome-permissions-api-方法-methods" tabindex="-1">二、<code>chrome.permissions API</code> 方法（<code>Methods</code>） <a class="header-anchor" href="#二、chrome-permissions-api-方法-methods" aria-label="Permalink to &quot;二、`chrome.permissions API` 方法（`Methods`）&quot;">​</a></h2><h3 id="_1-contains" tabindex="-1">1. <code>contains()</code> <a class="header-anchor" href="#_1-contains" aria-label="Permalink to &quot;1. `contains()`&quot;">​</a></h3><blockquote><p>检查插件是否具有指定权限。</p></blockquote><h4 id="_1-1-示例" tabindex="-1">1.1 示例 <a class="header-anchor" href="#_1-1-示例" aria-label="Permalink to &quot;1.1 示例&quot;">​</a></h4><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chrome.permissions.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">contains</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  permissions:</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  Permissions,</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  callback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="_1-2-参数" tabindex="-1">1.2 参数 <a class="header-anchor" href="#_1-2-参数" aria-label="Permalink to &quot;1.2 参数&quot;">​</a></h4><ul><li><code>permissions: Permissions</code></li><li><code>callback: function</code> 可选 <code>(result: boolean) =&gt; void</code></li></ul><h4 id="_1-3-返回" tabindex="-1">1.3 返回 <a class="header-anchor" href="#_1-3-返回" aria-label="Permalink to &quot;1.3 返回&quot;">​</a></h4><ul><li><code>Promise&lt;boolean&gt;</code> 如果插件具有指定的权限，则为 <code>true</code>。如果将某个来源同时指定为可选权限和内容脚本匹配模式，则返回 <code>false</code>，除非同时授予这两项权限。</li></ul><h3 id="_2-getall" tabindex="-1">2. <code>getAll()</code> <a class="header-anchor" href="#_2-getall" aria-label="Permalink to &quot;2. `getAll()`&quot;">​</a></h3><blockquote><p>获取插件的当前权限集。</p></blockquote><h4 id="_2-1-示例" tabindex="-1">2.1 示例 <a class="header-anchor" href="#_2-1-示例" aria-label="Permalink to &quot;2.1 示例&quot;">​</a></h4><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chrome.permissions.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  callback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_2-2-参数" tabindex="-1">2.2 参数 <a class="header-anchor" href="#_2-2-参数" aria-label="Permalink to &quot;2.2 参数&quot;">​</a></h4><ul><li><code>callback: function</code> 可选 <code>(permissions: Permissions)=&gt;void</code></li></ul><h4 id="_2-3-返回" tabindex="-1">2.3 返回 <a class="header-anchor" href="#_2-3-返回" aria-label="Permalink to &quot;2.3 返回&quot;">​</a></h4><ul><li><code>Promise&lt;Permissions&gt;</code> 插件的有效权限。</li></ul><h3 id="_3-remove" tabindex="-1">3. <code>remove()</code> <a class="header-anchor" href="#_3-remove" aria-label="Permalink to &quot;3. `remove()`&quot;">​</a></h3><blockquote><p>移除对指定权限的访问权限。</p></blockquote><h4 id="_3-1-示例" tabindex="-1">3.1 示例 <a class="header-anchor" href="#_3-1-示例" aria-label="Permalink to &quot;3.1 示例&quot;">​</a></h4><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chrome.permissions.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">remove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  permissions:</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  Permissions,</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  callback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="_3-2-参数" tabindex="-1">3.2 参数 <a class="header-anchor" href="#_3-2-参数" aria-label="Permalink to &quot;3.2 参数&quot;">​</a></h4><ul><li><code>permissions: Permissions</code></li><li><code>callback: function</code> 可选 <code>(removed: boolean)=&gt;void</code></li></ul><h4 id="_3-3-返回" tabindex="-1">3.3 返回 <a class="header-anchor" href="#_3-3-返回" aria-label="Permalink to &quot;3.3 返回&quot;">​</a></h4><ul><li><code>Promise&lt;boolean&gt;</code> 如果权限已移除，则为 <code>true</code>。</li></ul><h3 id="_4-request" tabindex="-1">4. <code>request()</code> <a class="header-anchor" href="#_4-request" aria-label="Permalink to &quot;4. `request()`&quot;">​</a></h3><blockquote><p>请求访问指定权限，必要时向用户显示提示。这些权限必须在清单的 <code>optional_permissions</code> 字段中定义，或者是用户保留的必需权限。</p></blockquote><h4 id="_4-1-示例" tabindex="-1">4.1 示例 <a class="header-anchor" href="#_4-1-示例" aria-label="Permalink to &quot;4.1 示例&quot;">​</a></h4><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chrome.permissions.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  permissions:</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  Permissions,</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  callback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="_4-2-参数" tabindex="-1">4.2 参数 <a class="header-anchor" href="#_4-2-参数" aria-label="Permalink to &quot;4.2 参数&quot;">​</a></h4><ul><li><code>permissions: Permissions</code></li><li><code>callback: function</code> 可选 <code>(granted: boolean)=&gt;void</code></li></ul><h4 id="_4-3-返回" tabindex="-1">4.3 返回 <a class="header-anchor" href="#_4-3-返回" aria-label="Permalink to &quot;4.3 返回&quot;">​</a></h4><ul><li><code>Promise&lt;boolean&gt;</code> 如果用户授予了指定的权限，则为 <code>true</code></li></ul><h2 id="三、chrome-permissions-api-事件-events" tabindex="-1">三、<code>chrome.permissions API</code> 事件（<code>Events</code>） <a class="header-anchor" href="#三、chrome-permissions-api-事件-events" aria-label="Permalink to &quot;三、`chrome.permissions API` 事件（`Events`）&quot;">​</a></h2><h3 id="_1-onadded" tabindex="-1">1. <code>onAdded</code> <a class="header-anchor" href="#_1-onadded" aria-label="Permalink to &quot;1. `onAdded`&quot;">​</a></h3><blockquote><p>在插件获取新权限时触发</p></blockquote><h4 id="_1-1-示例-1" tabindex="-1">1.1 示例 <a class="header-anchor" href="#_1-1-示例-1" aria-label="Permalink to &quot;1.1 示例&quot;">​</a></h4><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chrome.permissions.onAdded.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  callback:</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_1-2-参数-1" tabindex="-1">1.2 参数 <a class="header-anchor" href="#_1-2-参数-1" aria-label="Permalink to &quot;1.2 参数&quot;">​</a></h4><ul><li><code>callback: function</code></li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">permissions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  Permissions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;void</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_2-onremoved" tabindex="-1">2. <code>onRemoved</code> <a class="header-anchor" href="#_2-onremoved" aria-label="Permalink to &quot;2. `onRemoved`&quot;">​</a></h3><blockquote><p>在移除插件的权限时触发。</p></blockquote><h4 id="_2-1-参数" tabindex="-1">2.1 参数 <a class="header-anchor" href="#_2-1-参数" aria-label="Permalink to &quot;2.1 参数&quot;">​</a></h4><ul><li><code>callback: function</code></li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">permissions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  Permissions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;void</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div>',53),o=[l];function r(t,h,p,d,c,k){return i(),a("div",null,o)}const b=s(n,[["render",r]]);export{m as __pageData,b as default};
