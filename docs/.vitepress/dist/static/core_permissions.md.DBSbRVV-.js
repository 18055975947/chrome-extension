import{_ as e,c as a,o as s,a4 as i,aR as t}from"./chunks/framework.DUbQYUwk.js";const b=JSON.parse('{"title":"一、权限（Permissions）","description":"","frontmatter":{},"headers":[],"relativePath":"core/permissions.md","filePath":"core/permissions.md"}'),o={name:"core/permissions.md"},n=i(`<h1 id="一、权限-permissions" tabindex="-1">一、权限（<code>Permissions</code>） <a class="header-anchor" href="#一、权限-permissions" aria-label="Permalink to &quot;一、权限（\`Permissions\`）&quot;">​</a></h1><p>在使用插件的 <code>API</code> 时，大多数的时候都需要在 <code>manifest.json</code> 文件中声明 <code>permissions</code> 字段。</p><h2 id="一、权限类型" tabindex="-1">一、权限类型 <a class="header-anchor" href="#一、权限类型" aria-label="Permalink to &quot;一、权限类型&quot;">​</a></h2><p>在 <code>V3</code> 版本中可以声明以下类别的权限：</p><ul><li><code>permissions</code>： <ul><li>包含下面 <code>permissions</code> 权限列表中的项；</li></ul></li><li><code>optional_permissions</code>： <ul><li>由用户在运行时（而不是在安装时）授予；</li></ul></li><li><code>content_scripts.matches</code>： <ul><li>包含一个或多个匹配模式，可允许内容脚本注入到一个或多个主机中；</li></ul></li><li><code>host_permissions</code>： <ul><li>包含一个或多个匹配模式，可提供对一个或多个主机的访问权限；</li></ul></li><li><code>optional_host_permissions</code>： <ul><li>由用户在运行时（而不是在安装时）授予。</li></ul></li></ul><blockquote><p>如果插件遭到恶意软件入侵，设置权限有助于限制对插件造成的破坏。在安装之前或运行时，系统会向用户显示一些权限警告，以征求用户同意</p></blockquote><h2 id="二、manifest-json-示例" tabindex="-1">二、<code>Manifest.json</code> 示例 <a class="header-anchor" href="#二、manifest-json-示例" aria-label="Permalink to &quot;二、\`Manifest.json\` 示例&quot;">​</a></h2><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Permissions Extension&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;permissions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;activeTab&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;contextMenus&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;storage&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;optional_permissions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;topSites&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;host_permissions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;https://www.developer.chrome.com/*&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;optional_host_permissions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:[</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;https://*/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;http://*/*&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;manifest_version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="三、主机权限-host-permissions" tabindex="-1">三、主机权限（<code>Host permissions</code>） <a class="header-anchor" href="#三、主机权限-host-permissions" aria-label="Permalink to &quot;三、主机权限（\`Host permissions\`）&quot;">​</a></h2><p>主机权限允许插件与网址的匹配格式进行交互。有些 <code>Chrome API</code> 不仅需要拥有自己的 <code>API</code> 权限，还需要主机权限。</p><p>需要主机权限的 <code>API</code>：</p><ul><li>从插件 <code>Service Worker</code> 和插件页面发出 <code>fetch()</code> 请求。</li><li>使用 <code>chrome.tabs API</code> 读取和查询敏感的标签页属性（网址、标题和 <code>favIconUrl</code>）。</li><li>以编程方式注入内容脚本。</li><li>使用 <code>chrome.webRequest API</code> 监控和控制网络请求。</li><li>使用 <code>chrome.cookies API</code> 访问 <code>Cookie</code>。</li><li>使用 <code>chrome.declarativeNetRequest API</code> 重定向和修改请求及响应标头。</li></ul><h2 id="四、包含警告的权限" tabindex="-1">四、包含警告的权限 <a class="header-anchor" href="#四、包含警告的权限" aria-label="Permalink to &quot;四、包含警告的权限&quot;">​</a></h2><p>如果插件请求多项权限，并且其中的许多权限会在安装时显示警告，用户会看到警告列表 示例：</p><p><img src="`+t+'" alt="alt text" loading="lazy"></p><p>如果插件只显示少量警告或向用户说明权限，用户更有可能信任该插件。请考虑实现可选权限或功能略弱的 <code>API</code>，以避免收到警告。 在 <code>host_permissions</code> 和 <code>content_scripts.matches</code> 字段中添加或更改匹配模式也会触发警告。</p><h3 id="_1-权限警告列表" tabindex="-1">1. 权限警告列表 <a class="header-anchor" href="#_1-权限警告列表" aria-label="Permalink to &quot;1. 权限警告列表&quot;">​</a></h3><table><thead><tr><th>权限</th><th>说明</th><th>警告</th></tr></thead><tbody><tr><td><code>http://*/*</code> <br> <code>https://*/*</code> <br> <code>*://*/*</code> <br> <code>&lt;all_urls&gt;</code></td><td>对所有主机的访问权限</td><td>读取和更改在所有网站上的所有数据</td></tr><tr><td><code>https://HostName.com/</code></td><td>对 <code>https://HostName.com/</code> 的访问权限</td><td>读取和更改在 <code>HostName.com</code> 上的数据</td></tr><tr><td><code>accessibilityFeatures.modify</code></td><td>允许此插件修改个别无障碍功能的状态</td><td>更改无障碍设置</td></tr><tr><td><code>accessibilityFeatures.read</code></td><td>允许此插件读取各个无障碍功能状态</td><td>查看无障碍设置</td></tr><tr><td><code>bookmarks</code></td><td>对 <code>chrome.bookmarks API</code> 的访问权限</td><td>读取和更改书签</td></tr><tr><td><code>clipboardRead</code></td><td>如果插件使用 <code>document.execCommand(&#39;paste&#39;)</code>，则必须提供</td><td>读取复制和粘贴的数据</td></tr><tr><td><code>clipboardWrite</code></td><td>表示该插件使用 <code>document.execCommand(&#39;copy&#39;)</code> 或 <code>document.execCommand(&#39;cut&#39;)</code></td><td>修改复制和粘贴的数据</td></tr><tr><td><code>contentSettings</code></td><td>对 <code>chrome.contentSettings API</code> 的访问权限</td><td>更改用于控制网站对 <code>Cookie</code>、<code>JavaScript</code>、插件、地理定位、麦克风、摄像头等功能的使用权限的设置。</td></tr><tr><td><code>debugger</code></td><td>对 <code>chrome.debugger API</code> 的访问权限</td><td>访问页面调试程序后端 <br><br>读取和更改在所有网站上的所有数据</td></tr><tr><td><code>declarativeNetRequest</code></td><td>对 <code>chrome.declarativeNetRequest API</code> 的访问权限</td><td>屏蔽任何网页上的内容</td></tr><tr><td><code>declarativeNetRequestFeedback</code></td><td>函数和事件的访问权限，这些函数和事件会返回匹配的声明式规则的相关信息</td><td>读取浏览记录</td></tr><tr><td><code>desktopCapture</code></td><td>对 <code>chrome.desktopCapture API</code> 的访问权限</td><td>截取屏幕上的内容</td></tr><tr><td><code>downloads</code></td><td>对 <code>chrome.downloads API</code> 的访问权限</td><td>管理下载内容</td></tr><tr><td><code>favicon</code></td><td>对 <code>Favicon API</code> 的访问权限</td><td>读取访问的网站的图标</td></tr><tr><td><code>geolocation</code></td><td>允许插件在不提示用户授予权限的情况下使用 <code>HTML5 geolocation API</code></td><td>检测实际位置</td></tr><tr><td><code>history</code></td><td>对 <code>chrome.history API</code> 的访问权限</td><td>读取和更改所有已登录设备上的浏览记录</td></tr><tr><td><code>identity.email</code></td><td>通过 <code>chrome.identity API</code> 对电子邮件地址的访问权限</td><td>获取电子邮件地址</td></tr><tr><td><code>management</code></td><td>对 <code>chrome.management API</code> 的访问权限</td><td>管理应用、插件和主题背景</td></tr><tr><td><code>nativeMessaging</code></td><td>对 <code>Native Messaging API</code> 的访问权限</td><td>与协作的原生应用通信</td></tr><tr><td><code>notifications</code></td><td>对 <code>chrome.notifications API</code> 的访问权限</td><td>显示通知</td></tr><tr><td><code>pageCapture</code></td><td>对 <code>chrome.pageCapture API</code> 的访问权限</td><td>读取和更改在所有网站上的所有数据</td></tr><tr><td><code>privacy</code></td><td>对 <code>chrome.privacy API</code> 的访问权限</td><td>更改与隐私相关的设置</td></tr><tr><td><code>proxy</code></td><td>对 <code>chrome.proxy API</code> 的访问权限</td><td>读取和更改在所有网站上的所有数据</td></tr><tr><td><code>readingList</code></td><td>对 <code>chrome.readingList API</code> 的访问权限</td><td>读取和更改阅读清单中的条目</td></tr><tr><td><code>sessions</code> 和 <code>history</code></td><td>对 <code>chrome.sessionsAPI</code> 和 <code>chrome.history API</code> 的访问权限</td><td>读取和更改所有已登录设备上的浏览记录</td></tr><tr><td><code>sessions</code> 和 <code>tabs</code></td><td>对 <code>chrome.sessions API</code> 以及 <code>Tab</code> 对象的特权字段的访问权限</td><td>读取在所有已登录账号设备上的浏览记录</td></tr><tr><td><code>system.storage</code></td><td>对 <code>chrome.system.storage API </code>的访问权限</td><td>识别和弹出存储设备</td></tr><tr><td><code>tabCapture</code></td><td>对 <code>chrome.tabCapture API</code> 的访问权限</td><td>读取和更改在所有网站上的所有数据</td></tr><tr><td><code>tabGroups</code></td><td>对 <code>chrome.tabGroups API</code> 的访问权限</td><td>查看和管理标签页分组</td></tr><tr><td><code>tabs</code></td><td>对多个 <code>API</code>（包括 <code>chrome.tabs</code> 和 <code>chrome.windows</code>）使用的 <code>Tab</code> 对象的特权字段的访问权限</td><td>读取浏览记录</td></tr><tr><td><code>topSites</code></td><td>对 <code>chrome.topSites API</code> 的访问权限</td><td>读取最常访问的网站列表</td></tr><tr><td><code>ttsEngine</code></td><td>对 <code>chrome.ttsEngine API</code> 的访问权限</td><td>朗读使用合成语音说出的所有文字</td></tr><tr><td><code>webAuthenticationProxy</code></td><td>对 <code>chrome.webAuthenticationProxy API</code> 的访问权限</td><td>读取和更改在所有网站上的所有数据</td></tr><tr><td><code>webNavigation</code></td><td>对 <code>chrome.webNavigation API</code> 的访问权限</td><td>读取浏览记录</td></tr></tbody></table><h2 id="五、权限列表" tabindex="-1">五、权限列表 <a class="header-anchor" href="#五、权限列表" aria-label="Permalink to &quot;五、权限列表&quot;">​</a></h2><h3 id="_1-accessibilityfeatures-modify" tabindex="-1">1. <code>accessibilityFeatures.modify</code> <a class="header-anchor" href="#_1-accessibilityfeatures-modify" aria-label="Permalink to &quot;1. `accessibilityFeatures.modify`&quot;">​</a></h3><p>允许插件在使用 <code>chrome.accessibilityFeatures API</code> 时修改无障碍功能状态。</p><h3 id="_2-accessibilityfeatures-read" tabindex="-1">2. <code>accessibilityFeatures.read</code> <a class="header-anchor" href="#_2-accessibilityfeatures-read" aria-label="Permalink to &quot;2. `accessibilityFeatures.read`&quot;">​</a></h3><p>允许插件在使用 <code>chrome.accessibilityFeatures API</code> 时读取无障碍功能状态。</p><h3 id="_3-activetab" tabindex="-1">3. <code>activeTab</code> <a class="header-anchor" href="#_3-activetab" aria-label="Permalink to &quot;3. `activeTab`&quot;">​</a></h3><p>通过用户手势对活动标签页的临时访问权限。</p><h3 id="_4-alarms" tabindex="-1">4. <code>alarms</code> <a class="header-anchor" href="#_4-alarms" aria-label="Permalink to &quot;4. `alarms`&quot;">​</a></h3><p>对 <code>chrome.alarms API</code> 的访问权限。</p><h3 id="_5-audio" tabindex="-1">5. <code>audio</code> <a class="header-anchor" href="#_5-audio" aria-label="Permalink to &quot;5. `audio`&quot;">​</a></h3><p>对 <code>chrome.audio API</code> 的访问权限。</p><h3 id="_6-background" tabindex="-1">6. <code>background</code> <a class="header-anchor" href="#_6-background" aria-label="Permalink to &quot;6. `background`&quot;">​</a></h3><p>让 <code>Chrome</code> 尽早启动（用户登录计算机、启动 <code>Chrome</code> 之前）和延迟关闭（即使最后一个窗口已关闭，直到用户明确退出 <code>Chrome</code>）。</p><h3 id="_7-bookmarks" tabindex="-1">7. <code>bookmarks</code> <a class="header-anchor" href="#_7-bookmarks" aria-label="Permalink to &quot;7. `bookmarks`&quot;">​</a></h3><p>对 <code>chrome.bookmarks API</code> 的访问权限。</p><h3 id="_8-browsingdata" tabindex="-1">8. <code>browsingData</code> <a class="header-anchor" href="#_8-browsingdata" aria-label="Permalink to &quot;8. `browsingData`&quot;">​</a></h3><p>对 <code>chrome.browsingData API</code> 的访问权限。</p><h3 id="_9-certificateprovider" tabindex="-1">9. <code>certificateProvider</code> <a class="header-anchor" href="#_9-certificateprovider" aria-label="Permalink to &quot;9. `certificateProvider`&quot;">​</a></h3><p>对 <code>chrome.certificateProvider API</code> 的访问权限。</p><h3 id="_10-contentsettings" tabindex="-1">10. <code>contentSettings</code> <a class="header-anchor" href="#_10-contentsettings" aria-label="Permalink to &quot;10. `contentSettings`&quot;">​</a></h3><p>对 <code>chrome.contentSettings API</code> 的访问权限。</p><h3 id="_11-contextmenus" tabindex="-1">11. <code>contextMenus</code> <a class="header-anchor" href="#_11-contextmenus" aria-label="Permalink to &quot;11. `contextMenus`&quot;">​</a></h3><p>对 <code>chrome.contextMenus API</code> 的访问权限。</p><h3 id="_12-cookies" tabindex="-1">12. <code>cookies</code> <a class="header-anchor" href="#_12-cookies" aria-label="Permalink to &quot;12. `cookies`&quot;">​</a></h3><p>对 <code>chrome.cookies API</code> 的访问权限。</p><h3 id="_13-debugger" tabindex="-1">13. <code>debugger</code> <a class="header-anchor" href="#_13-debugger" aria-label="Permalink to &quot;13. `debugger`&quot;">​</a></h3><p>对 <code>chrome.debugger API</code> 的访问权限。</p><h3 id="_14-declarativecontent" tabindex="-1">14. <code>declarativeContent</code> <a class="header-anchor" href="#_14-declarativecontent" aria-label="Permalink to &quot;14. `declarativeContent`&quot;">​</a></h3><p>对 <code>chrome.declarativeContent API</code> 的访问权限。</p><h3 id="_15-declarativenetrequest" tabindex="-1">15. <code>declarativeNetRequest</code> <a class="header-anchor" href="#_15-declarativenetrequest" aria-label="Permalink to &quot;15. `declarativeNetRequest`&quot;">​</a></h3><p>对 <code>chrome.declarativeNetRequest API</code> 的访问权限。</p><h3 id="_16-declarativenetrequestwithhostaccess" tabindex="-1">16. <code>declarativeNetRequestWithHostAccess</code> <a class="header-anchor" href="#_16-declarativenetrequestwithhostaccess" aria-label="Permalink to &quot;16. `declarativeNetRequestWithHostAccess`&quot;">​</a></h3><p>在需要主机权限时对 <code>chrome.declarativeNetRequest API</code> 的访问权限。</p><h3 id="_17-declarativenetrequestfeedback" tabindex="-1">17. <code>declarativeNetRequestFeedback</code> <a class="header-anchor" href="#_17-declarativenetrequestfeedback" aria-label="Permalink to &quot;17. `declarativeNetRequestFeedback`&quot;">​</a></h3><p>使用 <code>chrome.declarativeNetRequest API</code> 时向开发者工具控制台写入错误和警告的权限。</p><h3 id="_18-dns" tabindex="-1">18. <code>dns</code> <a class="header-anchor" href="#_18-dns" aria-label="Permalink to &quot;18. `dns`&quot;">​</a></h3><p>对 <code>chrome.dns API</code> 的访问权限。</p><h3 id="_19-desktopcapture" tabindex="-1">19. <code>desktopCapture</code> <a class="header-anchor" href="#_19-desktopcapture" aria-label="Permalink to &quot;19. `desktopCapture`&quot;">​</a></h3><p>对 <code>chrome.desktopCapture API</code> 的访问权限。</p><h3 id="_20-documentscan" tabindex="-1">20. <code>documentScan</code> <a class="header-anchor" href="#_20-documentscan" aria-label="Permalink to &quot;20. `documentScan`&quot;">​</a></h3><p>对 <code>chrome.documentScan API</code> 的访问权限。</p><h3 id="_21-downloads" tabindex="-1">21. <code>downloads</code> <a class="header-anchor" href="#_21-downloads" aria-label="Permalink to &quot;21. `downloads`&quot;">​</a></h3><p>对 <code>chrome.downloads API</code> 的访问权限。</p><h3 id="_22-downloads-open" tabindex="-1">22. <code>downloads.open</code> <a class="header-anchor" href="#_22-downloads-open" aria-label="Permalink to &quot;22. `downloads.open`&quot;">​</a></h3><p>允许使用 <code>chrome.downloads.open()</code>。</p><h3 id="_23-downloads-ui" tabindex="-1">23. <code>downloads.ui</code> <a class="header-anchor" href="#_23-downloads-ui" aria-label="Permalink to &quot;23. `downloads.ui`&quot;">​</a></h3><p>允许使用 <code>chrome.downloads.setUiOptions()</code>。</p><h3 id="_24-enterprise-deviceattributes" tabindex="-1">24. <code>enterprise.deviceAttributes</code> <a class="header-anchor" href="#_24-enterprise-deviceattributes" aria-label="Permalink to &quot;24. `enterprise.deviceAttributes`&quot;">​</a></h3><p>对 <code>chrome.enterprise.deviceAttributes API</code> 的访问权限。</p><h3 id="_25-enterprise-hardwareplatform" tabindex="-1">25. <code>enterprise.hardwarePlatform</code> <a class="header-anchor" href="#_25-enterprise-hardwareplatform" aria-label="Permalink to &quot;25. `enterprise.hardwarePlatform`&quot;">​</a></h3><p>对 <code>chrome.enterprise.hardwarePlatform API</code> 的访问权限。</p><h3 id="_26-enterprise-networkingattributes" tabindex="-1">26. <code>enterprise.networkingAttributes</code> <a class="header-anchor" href="#_26-enterprise-networkingattributes" aria-label="Permalink to &quot;26. `enterprise.networkingAttributes`&quot;">​</a></h3><p>对 <code>chrome.enterprise.networkingAttributes API</code> 的访问权限。</p><h3 id="_27-enterprise-platformkeys" tabindex="-1">27. <code>enterprise.platformKeys</code> <a class="header-anchor" href="#_27-enterprise-platformkeys" aria-label="Permalink to &quot;27. `enterprise.platformKeys`&quot;">​</a></h3><p>对 <code>chrome.enterprise.platformKeys API</code> 的访问权限。</p><h3 id="_28-favicon" tabindex="-1">28. <code>favicon</code> <a class="header-anchor" href="#_28-favicon" aria-label="Permalink to &quot;28. `favicon`&quot;">​</a></h3><p>对 <code>Favicon API</code> 的访问权限。</p><h3 id="_29-filebrowserhandler" tabindex="-1">29. <code>fileBrowserHandler</code> <a class="header-anchor" href="#_29-filebrowserhandler" aria-label="Permalink to &quot;29. `fileBrowserHandler`&quot;">​</a></h3><p>对 <code>chrome.fileBrowserHandler API</code> 的访问权限。</p><h3 id="_30-filesystemprovider" tabindex="-1">30. <code>fileSystemProvider</code> <a class="header-anchor" href="#_30-filesystemprovider" aria-label="Permalink to &quot;30. `fileSystemProvider`&quot;">​</a></h3><p>对 <code>chrome.fileSystemProvider API</code> 的访问权限。</p><h3 id="_31-fontsettings" tabindex="-1">31. <code>fontSettings</code> <a class="header-anchor" href="#_31-fontsettings" aria-label="Permalink to &quot;31. `fontSettings`&quot;">​</a></h3><p>对 <code>chrome.fontSettings API</code> 的访问权限。</p><h3 id="_32-gcm" tabindex="-1">32. <code>gcm</code> <a class="header-anchor" href="#_32-gcm" aria-label="Permalink to &quot;32. `gcm`&quot;">​</a></h3><p>对 <code>chrome.gcm</code> 和 <code>chrome.instanceID API</code> 的访问权限。</p><h3 id="_33-geolocation" tabindex="-1">33. <code>geolocation</code> <a class="header-anchor" href="#_33-geolocation" aria-label="Permalink to &quot;33. `geolocation`&quot;">​</a></h3><p>允许插件在不提示用户授予权限的情况下使用 <code>geolocation API</code>。</p><h3 id="_34-history" tabindex="-1">34. <code>history</code> <a class="header-anchor" href="#_34-history" aria-label="Permalink to &quot;34. `history`&quot;">​</a></h3><p>对 <code>chrome.history API</code> 的访问权限。</p><h3 id="_35-identity" tabindex="-1">35. <code>identity</code> <a class="header-anchor" href="#_35-identity" aria-label="Permalink to &quot;35. `identity`&quot;">​</a></h3><p>对 <code>chrome.identity API</code> 的访问权限。</p><h3 id="_36-idle" tabindex="-1">36. <code>idle</code> <a class="header-anchor" href="#_36-idle" aria-label="Permalink to &quot;36. `idle`&quot;">​</a></h3><p>对<code> chrome.idle API</code> 的访问权限。</p><h3 id="_37-loginstate" tabindex="-1">37. <code>loginState</code> <a class="header-anchor" href="#_37-loginstate" aria-label="Permalink to &quot;37. `loginState`&quot;">​</a></h3><p>对 <code>chrome.loginState API</code> 的访问权限。</p><h3 id="_38-management" tabindex="-1">38. <code>management</code> <a class="header-anchor" href="#_38-management" aria-label="Permalink to &quot;38. `management`&quot;">​</a></h3><p>对 <code>chrome.management API</code> 的访问权限。</p><h3 id="_39-nativemessaging" tabindex="-1">39. <code>nativeMessaging</code> <a class="header-anchor" href="#_39-nativemessaging" aria-label="Permalink to &quot;39. `nativeMessaging`&quot;">​</a></h3><p>对 <code>Native Messaging API</code> 的访问权限。</p><h3 id="_40-notifications" tabindex="-1">40. <code>notifications</code> <a class="header-anchor" href="#_40-notifications" aria-label="Permalink to &quot;40. `notifications`&quot;">​</a></h3><p>对 <code>chrome.notifications API</code> 的访问权限。</p><h3 id="_41-offscreen" tabindex="-1">41. <code>offscreen</code> <a class="header-anchor" href="#_41-offscreen" aria-label="Permalink to &quot;41. `offscreen`&quot;">​</a></h3><p>对 <code>chrome.offscreen API</code> 的访问权限。</p><h3 id="_42-pagecapture" tabindex="-1">42. <code>pageCapture</code> <a class="header-anchor" href="#_42-pagecapture" aria-label="Permalink to &quot;42. `pageCapture`&quot;">​</a></h3><p>对 <code>chrome.pageCapture API</code> 的访问权限。</p><h3 id="_43-platformkeys" tabindex="-1">43. <code>platformKeys</code> <a class="header-anchor" href="#_43-platformkeys" aria-label="Permalink to &quot;43. `platformKeys`&quot;">​</a></h3><p>对 <code>chrome.platformKeys API</code> 的访问权限。</p><h3 id="_44-power" tabindex="-1">44. <code>power</code> <a class="header-anchor" href="#_44-power" aria-label="Permalink to &quot;44. `power`&quot;">​</a></h3><p>对 <code>chrome.power API</code> 的访问权限。</p><h3 id="_45-printerprovider" tabindex="-1">45. <code>printerProvider</code> <a class="header-anchor" href="#_45-printerprovider" aria-label="Permalink to &quot;45. `printerProvider`&quot;">​</a></h3><p>对 <code>chrome.printerProvider API</code> 的访问权限。</p><h3 id="_46-printing" tabindex="-1">46. <code>printing</code> <a class="header-anchor" href="#_46-printing" aria-label="Permalink to &quot;46. `printing`&quot;">​</a></h3><p>对 <code>chrome.printing API</code> 的访问权限。</p><h3 id="_47-printingmetrics" tabindex="-1">47. <code>printingMetrics</code> <a class="header-anchor" href="#_47-printingmetrics" aria-label="Permalink to &quot;47. `printingMetrics`&quot;">​</a></h3><p>对 <code>chrome.printingMetrics API</code> 的访问权限。</p><h3 id="_48-privacy" tabindex="-1">48. <code>privacy</code> <a class="header-anchor" href="#_48-privacy" aria-label="Permalink to &quot;48. `privacy`&quot;">​</a></h3><p>对 <code>chrome.privacy API</code> 的访问权限。</p><h3 id="_49-processes" tabindex="-1">49. <code>processes</code> <a class="header-anchor" href="#_49-processes" aria-label="Permalink to &quot;49. `processes`&quot;">​</a></h3><p>对 <code>chrome.processes API</code> 的访问权限。</p><h3 id="_50-proxy" tabindex="-1">50. <code>proxy</code> <a class="header-anchor" href="#_50-proxy" aria-label="Permalink to &quot;50. `proxy`&quot;">​</a></h3><p>对 <code>chrome.proxy API</code> 的访问权限。</p><h3 id="_51-runtime" tabindex="-1">51. <code>runtime</code> <a class="header-anchor" href="#_51-runtime" aria-label="Permalink to &quot;51. `runtime`&quot;">​</a></h3><p>对 <code>runtime.connectNative()</code> 和 <code>runtime.sendNativeMessage()</code> 的访问权限。对于 <code>runtime</code> 命名空间的所有其他功能，无需任何权限。</p><h3 id="_52-scripting" tabindex="-1">52. <code>scripting</code> <a class="header-anchor" href="#_52-scripting" aria-label="Permalink to &quot;52. `scripting`&quot;">​</a></h3><p>对 <code>chrome.scripting API</code> 的访问权限。</p><h3 id="_53-search" tabindex="-1">53. <code>search</code> <a class="header-anchor" href="#_53-search" aria-label="Permalink to &quot;53. `search`&quot;">​</a></h3><p>对 <code>chrome.search API</code> 的访问权限。</p><h3 id="_54-sessions" tabindex="-1">54. <code>sessions</code> <a class="header-anchor" href="#_54-sessions" aria-label="Permalink to &quot;54. `sessions`&quot;">​</a></h3><p>对 <code>chrome.sessions API</code> 的访问权限。</p><h3 id="_55-sidepanel" tabindex="-1">55. <code>sidePanel</code> <a class="header-anchor" href="#_55-sidepanel" aria-label="Permalink to &quot;55. `sidePanel`&quot;">​</a></h3><p>对 <code>chrome.sidePanel API</code> 的访问权限。</p><h3 id="_56-storage" tabindex="-1">56. <code>storage</code> <a class="header-anchor" href="#_56-storage" aria-label="Permalink to &quot;56. `storage`&quot;">​</a></h3><p>对 <code>chrome.storage API</code> 的访问权限。</p><h3 id="_57-system-cpu" tabindex="-1">57. <code>system.cpu</code> <a class="header-anchor" href="#_57-system-cpu" aria-label="Permalink to &quot;57. `system.cpu`&quot;">​</a></h3><p>对 <code>chrome.system.cpu API</code> 的访问权限。</p><h3 id="_58-system-display" tabindex="-1">58. <code>system.display</code> <a class="header-anchor" href="#_58-system-display" aria-label="Permalink to &quot;58. `system.display`&quot;">​</a></h3><p>对 <code>chrome.system.display API</code> 的访问权限。</p><h3 id="_59-system-memory" tabindex="-1">59. <code>system.memory</code> <a class="header-anchor" href="#_59-system-memory" aria-label="Permalink to &quot;59. `system.memory`&quot;">​</a></h3><p>对 <code>chrome.system.memory API</code> 的访问权限。</p><h3 id="_60-system-storage" tabindex="-1">60. <code>system.storage</code> <a class="header-anchor" href="#_60-system-storage" aria-label="Permalink to &quot;60. `system.storage`&quot;">​</a></h3><p>对 <code>chrome.system.storage API</code> 的访问权限。</p><h3 id="_61-tabcapture" tabindex="-1">61. <code>tabCapture</code> <a class="header-anchor" href="#_61-tabcapture" aria-label="Permalink to &quot;61. `tabCapture`&quot;">​</a></h3><p>对 <code>chrome.tabCapture API</code> 的访问权限。</p><h3 id="_62-tabgroups" tabindex="-1">62. <code>tabGroups</code> <a class="header-anchor" href="#_62-tabgroups" aria-label="Permalink to &quot;62. `tabGroups`&quot;">​</a></h3><p>对 <code>chrome.tabGroups API</code> 的访问权限。</p><h3 id="_63-tabs" tabindex="-1">63. <code>tabs</code> <a class="header-anchor" href="#_63-tabs" aria-label="Permalink to &quot;63. `tabs`&quot;">​</a></h3><p>对多个 <code>API</code>（包括 <code>chrome.tabs</code> 和 <code>chrome.windows</code>）使用的 <code>Tab</code> 对象的特权字段的访问权限。</p><h3 id="_64-topsites" tabindex="-1">64. <code>topSites</code> <a class="header-anchor" href="#_64-topsites" aria-label="Permalink to &quot;64. `topSites`&quot;">​</a></h3><p>对 <code>chrome.topSites API</code> 的访问权限。</p><h3 id="_65-tts" tabindex="-1">65. <code>tts</code> <a class="header-anchor" href="#_65-tts" aria-label="Permalink to &quot;65. `tts`&quot;">​</a></h3><p>对 <code>chrome.tts API</code> 的访问权限。</p><h3 id="_66-ttsengine" tabindex="-1">66. <code>ttsEngine</code> <a class="header-anchor" href="#_66-ttsengine" aria-label="Permalink to &quot;66. `ttsEngine`&quot;">​</a></h3><p>对 <code>chrome.ttsEngine API</code> 的访问权限。</p><h3 id="_67-unlimitedstorage" tabindex="-1">67. <code>unlimitedStorage</code> <a class="header-anchor" href="#_67-unlimitedstorage" aria-label="Permalink to &quot;67. `unlimitedStorage`&quot;">​</a></h3><p>针对 <code>chrome.storage.local</code>、<code>IndexedDB</code> 提供无限制的配额， 为 <code>chrome.storage.local</code>、<code>IndexedDB</code>、<code>Cache Storage</code> 和 <code>Origin Private File System</code> 提供无限制的配额。</p><h3 id="_68-vpnprovider" tabindex="-1">68. <code>vpnProvider</code> <a class="header-anchor" href="#_68-vpnprovider" aria-label="Permalink to &quot;68. `vpnProvider`&quot;">​</a></h3><p>对 <code>chrome.vpnProvider API</code> 的访问权限。</p><h3 id="_69-wallpaper" tabindex="-1">69. <code>wallpaper</code> <a class="header-anchor" href="#_69-wallpaper" aria-label="Permalink to &quot;69. `wallpaper`&quot;">​</a></h3><p>对 <code>chrome.wallpaper API</code> 的访问权限。</p><h3 id="_70-webauthenticationproxy" tabindex="-1">70. <code>webAuthenticationProxy</code> <a class="header-anchor" href="#_70-webauthenticationproxy" aria-label="Permalink to &quot;70. `webAuthenticationProxy`&quot;">​</a></h3><p>对 <code>chrome.webAuthenticationProxy API</code> 的访问权限。</p><h3 id="_71-webnavigation" tabindex="-1">71. <code>webNavigation</code> <a class="header-anchor" href="#_71-webnavigation" aria-label="Permalink to &quot;71. `webNavigation`&quot;">​</a></h3><p>对 <code>chrome.webNavigation API</code> 的访问权限。</p><h3 id="_72-webrequest" tabindex="-1">72. <code>webRequest</code> <a class="header-anchor" href="#_72-webrequest" aria-label="Permalink to &quot;72. `webRequest`&quot;">​</a></h3><p>对 <code>chrome.webRequest API</code> 的访问权限。</p><h3 id="_73-webrequestblocking" tabindex="-1">73. <code>webRequestBlocking</code> <a class="header-anchor" href="#_73-webrequestblocking" aria-label="Permalink to &quot;73. `webRequestBlocking`&quot;">​</a></h3><p>允许使用 <code>chrome.webRequest API</code> 进行屏蔽。</p><h2 id="六、可选权限" tabindex="-1">六、可选权限 <a class="header-anchor" href="#六、可选权限" aria-label="Permalink to &quot;六、可选权限&quot;">​</a></h2><h3 id="_1-确定必需权限和可选权限" tabindex="-1">1. 确定必需权限和可选权限 <a class="header-anchor" href="#_1-确定必需权限和可选权限" aria-label="Permalink to &quot;1. 确定必需权限和可选权限&quot;">​</a></h3><ul><li>插件可以声明必需权限和可选权限。 <ul><li>如果插件的基本功能需要用到所需权限，请使用这些权限。</li><li>如果插件中的可选功能需要用到可选权限，请使用这些权限。</li></ul></li><li>必需权限的优点： <ul><li>提示更少：插件可以提示用户接受所有权限一次。</li><li>开发更简单：必要权限必定存在。</li></ul></li><li>可选权限的优点： <ul><li>安全性更高：由于用户仅启用所需的权限，因此插件能够以更少的权限运行。</li><li>为用户提供更实用的信息：在用户启用相关功能时，插件可以解释为什么它需要特定权限。</li><li>升级更轻松：升级插件时，如果升级过程增加了可选权限而非必需权限，<code>Chrome</code> 不会为用户停用该插件。</li></ul></li></ul><h3 id="_2-在-manifest-json-中声明可选权限" tabindex="-1">2. 在 <code>Manifest.json</code> 中声明可选权限 <a class="header-anchor" href="#_2-在-manifest-json-中声明可选权限" aria-label="Permalink to &quot;2. 在 `Manifest.json` 中声明可选权限&quot;">​</a></h3><p>使用 <code>optional_permissions</code> 键在插件清单中声明可选权限，格式与 <code>permissions</code> 字段相同：</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>\n<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;My extension&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;optional_permissions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tabs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>\n<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;optional_host_permissions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://www.google.com/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_2-1-无法指定为可选的权限" tabindex="-1">2.1 无法指定为可选的权限 <a class="header-anchor" href="#_2-1-无法指定为可选的权限" aria-label="Permalink to &quot;2.1 无法指定为可选的权限&quot;">​</a></h4><p>大多数 <code>Chrome</code> 插件权限均可指定为可选权限，但以下权限除外。</p><ul><li><code>debugger</code></li><li><code>declarativeNetRequest&quot;devtools</code></li><li><code>experimental</code></li><li><code>geolocation</code></li><li><code>mdns</code></li><li><code>proxy</code></li><li><code>tts</code></li><li><code>ttsEngine</code></li><li><code>wallpaper</code></li></ul><h3 id="_3-请求可选权限" tabindex="-1">3. 请求可选权限 <a class="header-anchor" href="#_3-请求可选权限" aria-label="Permalink to &quot;3. 请求可选权限&quot;">​</a></h3><p>示例： 使用 <code>permissions.request()</code> 在 <code>click</code> 中请求权限：</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.querySelector(&#39;#my-button&#39;).addEventListener(&#39;click&#39;, (event) =&gt; {</span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Permissions must be requested from inside a user gesture, like a button&#39;s</span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 权限必须从用户手势内部请求，比如按钮</span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // click handler.</span></span>\n<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  chrome.permissions.request({</span></span>\n<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    permissions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">&#39;tabs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>\n<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    origins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">&#39;https:</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//www.google.com/&#39;]</span></span>\n<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  }</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">(granted)</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // The callback argument will be true if the user granted the permissions.</span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 如果用户授予权限，则callback参数将为true。</span></span>\n<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">    if</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> (granted)</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> {</span></span>\n<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">      doSomething();</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>\n<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">      doSomethingElse();</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>\n<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  });</span></span>\n<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_4-检查插件的当前权限" tabindex="-1">4. 检查插件的当前权限 <a class="header-anchor" href="#_4-检查插件的当前权限" aria-label="Permalink to &quot;4. 检查插件的当前权限&quot;">​</a></h3><p>如需检查插件是否具有特定权限或一组权限，请使用 <code>permission.contains()</code>：</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chrome.permissions.contains({</span></span>\n<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  permissions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">&#39;tabs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>\n<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  origins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">&#39;https:</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//www.google.com/&#39;]</span></span>\n<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">(result)</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>\n<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  if</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> (result)</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> {</span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // The extension has the permissions.</span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 扩展具有相应的权限。</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // The extension doesn&#39;t have the permissions.</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>\n<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_5-移除权限" tabindex="-1">5. 移除权限 <a class="header-anchor" href="#_5-移除权限" aria-label="Permalink to &quot;5. 移除权限&quot;">​</a></h3><p>如果不再需要某些权限，应将其移除。移除权限后，调用 <code>permissions.request()</code> 通常会在不提示用户的情况下重新添加该权限。</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">chrome.permissions.remove({</span></span>\n<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  permissions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">&#39;tabs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>\n<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  origins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">&#39;https:</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//www.google.com/&#39;]</span></span>\n<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">(removed)</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>\n<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">  if</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> (removed)</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> {</span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // The permissions have been removed.</span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 权限已被移除。</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // The permissions have not been removed (e.g., you tried to remove</span></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // required permissions).</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>\n<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div>',183),d=[n];function r(l,c,h,p,k,u){return s(),a("div",null,d)}const g=e(o,[["render",r]]);export{b as __pageData,g as default};
